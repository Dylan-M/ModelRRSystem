#* 
#* ------------------------------------------------------------------
#* Makefile.in - 
#* Created by Robert Heller on Sun Jul 28 09:58:05 2002
#* ------------------------------------------------------------------
#* Modification History: $Log$
#* Modification History: Revision 1.5  2004/03/13 15:49:49  heller
#* Modification History: *** empty log message ***
#* Modification History:
#* Modification History: Revision 1.4  2002/10/17 00:00:53  heller
#* Modification History: Add Documentation  (Doc++)
#* Modification History:
#* Modification History: Implement turnout body, track length, and turntable support.
#* Modification History:
#* Modification History: Revision 1.3  2002/09/24 04:20:18  heller
#* Modification History: MRRXtrkCad => TrackGraph
#* Modification History:
#* Modification History: Revision 1.2  2002/07/28 14:03:50  heller
#* Modification History: Add it copyright notice headers
#* Modification History:
#* ------------------------------------------------------------------
#* Contents:
#* ------------------------------------------------------------------
#*  
#*     Model RR System, Version 2
#*     Copyright (C) 1994,1995,2002  Robert Heller D/B/A Deepwoods Software
#* 			51 Locke Hill Road
#* 			Wendell, MA 01379-9728
#* 
#*     This program is free software; you can redistribute it and/or modify
#*     it under the terms of the GNU General Public License as published by
#*     the Free Software Foundation; either version 2 of the License, or
#*     (at your option) any later version.
#* 
#*     This program is distributed in the hope that it will be useful,
#*     but WITHOUT ANY WARRANTY; without even the implied warranty of
#*     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#*     GNU General Public License for more details.
#* 
#*     You should have received a copy of the GNU General Public License
#*     along with this program; if not, write to the Free Software
#*     Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
#* 
#*  
#* 
LibSRCS = ParseFile.cc TrackGraph.cc #SigExpr.cc Turnout.cc Block.cc Table.cc \
	  #Cross.cc Signal.cc NonROW.cc Segment.cc Tree.cc 
LibOBJS = ParseFile.o TrackGraph.o #SigExpr.o \
	  #Turnout.o Block.o Table.o Cross.o Signal.o NonROW.o Segment.o \
	  #Tree.o 
HEADERS = TrackGraph.h TrackBody.h ParseFile.h IntegerList.h TurnoutBody.h \
	  #Block.h  NonROW.h  Segment.h \
	  #Signal.h  Tree.h \
	  #Cross.h  SigExpr.h  Table.h   Turnout.h \
	  
LIBRARY = MRRClass
LIB = ../../Lib
prefix     = @prefix@
exec_prefix= @exec_prefix@
BIN_DIR        = $(exec_prefix)/bin
LIB_DIR        = $(exec_prefix)/lib
NSTALL         = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA    = @INSTALL_DATA@
CXX = @CXX@
BISONXX = @BISONXX@
AR              = @AR@
RANLIB          = @RANLIB@
BaseCXXFLAGS    = @CXXFLAGS@
DEFS            = @DEFS@
SHLIB_CFLAGS    = @TCL_SHLIB_CFLAGS@
SHLIB_SUFFIX    = @TCL_SHLIB_SUFFIX@
SHLIB_LD        = @SHLIB_LD@
INCLUDES        = -I. -I../Parsers

CXXFLAGS = $(DEFS) $(BaseCXXFLAGS) $(SHLIB_CFLAGS) $(INCLUDES) -c -Wall

all: .depend $(LIB)/lib$(LIBRARY).a $(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX)

$(LIB)/lib$(LIBRARY).a : $(LibOBJS)
	rm -f $(LIB)/lib$(LIBRARY).a
	$(AR) rv $(LIB)/lib$(LIBRARY).a $(LibOBJS)
	$(RANLIB) $(LIB)/lib$(LIBRARY).a

$(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX) : $(LibOBJS)
	rm -f $(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX)*
	$(SHLIB_LD) -Wl,-soname,lib$(LIBRARY)$(SHLIB_SUFFIX).0 \
		-o $(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX).0 $(LibOBJS)
	ln -sf lib$(LIBRARY)$(SHLIB_SUFFIX).0 \
		$(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX)


.depend depend dep: $(LibSRCS) $(HEADERS)
	$(CPP) -M $(CXXFLAGS) $(LibSRCS) > .depend

clean:
	rm -f $(LibOBJS) .depend

distclean: clean
	rm -f Makefile

#
# include a dependency file if one exists
#
ifeq (.depend,$(wildcard .depend))
include .depend
endif


