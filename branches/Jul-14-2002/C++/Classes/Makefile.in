LibSRCS = SigExpr.cc Turnout.cc Block.cc Table.cc Cross.cc Signal.cc NonROW.cc \
	  Segment.cc Tree.cc ParseFile.cc
LibOBJS = SigExpr.o \
	  Turnout.o Block.o Table.o Cross.o Signal.o NonROW.o Segment.o \
	  Tree.o ParseFile.o
HEADERS = Block.h  NonROW.h     Segment.h  Signal.h  Tree.h \
	  Cross.h  ParseFile.h  SigExpr.h  Table.h   Turnout.h
LIBRARY = MRRClass
LIB = ../../Lib
prefix     = @prefix@
exec_prefix= @exec_prefix@
BIN_DIR        = $(exec_prefix)/bin
LIB_DIR        = $(exec_prefix)/lib
NSTALL         = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA    = @INSTALL_DATA@
CXX = @CXX@
BISONXX = @BISONXX@
AR              = @AR@
RANLIB          = @RANLIB@
BaseCXXFLAGS    = @CXXFLAGS@
DEFS            = @DEFS@
SHLIB_CFLAGS    = @TCL_SHLIB_CFLAGS@
SHLIB_SUFFIX    = @TCL_SHLIB_SUFFIX@
SHLIB_LD        = @TCL_SHLIB_LD@
INCLUDES        = -I. -I../Parsers

CXXFLAGS = $(DEFS) $(BaseCXXFLAGS) $(SHLIB_CFLAGS) $(INCLUDES) -c -Wall

all: .depend $(LIB)/lib$(LIBRARY).a $(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX)

$(LIB)/lib$(LIBRARY).a : $(LibOBJS)
	rm -f $(LIB)/lib$(LIBRARY).a
	$(AR) rv $(LIB)/lib$(LIBRARY).a $(LibOBJS)
	$(RANLIB) $(LIB)/lib$(LIBRARY).a

$(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX) : $(LibOBJS)
	rm -f $(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX)
	$(SHLIB_LD) -o $(LIB)/lib$(LIBRARY)$(SHLIB_SUFFIX) $(LibOBJS)


.depend depend dep: $(LibSRCS) $(HEADERS)
	$(CPP) -M $(CXXFLAGS) $(LibSRCS) > .depend

clean:
	rm -f $(LibOBJS) .depend

distclean: clean
	rm -f Makefile

#
# include a dependency file if one exists
#
ifeq (.depend,$(wildcard .depend))
include .depend
endif


